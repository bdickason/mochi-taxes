// Generated by CoffeeScript 1.4.0

/* Data models and interface with Mysql
*/


(function() {
  var Db, Mysql, cfg;

  Mysql = require('mysql');

  cfg = require('../cfg/config.js');

  exports.Db = Db = (function() {

    function Db(cfg) {
      this.mysql = Mysql.createConnection({
        host: "" + cfg.DB_HOSTNAME,
        port: "" + cfg.DB_PORT,
        user: "" + cfg.DB_USERNAME,
        password: "" + cfg.DB_PASSWORD,
        database: "" + cfg.DB_DATABASE
      });
      this.mysql.connect(function(err) {
        if (err) {
          return console.log("Error: " + err);
        }
      });
    }

    Db.prototype.test = function(callback) {
      return this.mysql.query("SELECT 1", function(err, rows) {
        if (err) {
          console.log("Error: " + err);
        }
        return callback(err, rows);
      });
    };

    return Db;

  })();

}).call(this);
